<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Hugo/tags/tidb/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://blog.wukaige.com/hugo-theme-console/css/terminal-0.7.2.min.css">
    <link rel="stylesheet" href="https://blog.wukaige.com/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="https://blog.wukaige.com/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       
      <link href="https://blog.wukaige.com/tags/tidb/index.xml" rel="alternate" type="application/rss+xml" title="Hugo" />
    <meta property="og:title" content="TiDB" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.wukaige.com/tags/tidb/" />


<meta name="twitter:title" content="TiDB"/>
<meta name="twitter:description" content=""/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://blog.wukaige.com/" class="no-style site-name">Hugo</a>:~# 
              <a href='https://blog.wukaige.com/tags'>tags</a>/<a href='https://blog.wukaige.com/tags/tidb'>tidb</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="https://blog.wukaige.com/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="https://blog.wukaige.com/posts/" typeof="ListItem">posts/</a></li>
                
                <li><a href="https://blog.wukaige.com/photos/" typeof="ListItem">photos/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>TiDB</h1>
<br/>


<div class="posts-list">

    
        <div class="post">
            <p>
                <div class="date">Nov. 23, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-lightning-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="TiDB-Lightning 基础使用">TiDB-Lightning 基础使用</a></h1>
                <p>前提是已经用 <a href="https://docs.pingcap.com/tidb/stable/dumpling-overview">Dumpling</a> 将数据从上游数据库导出。</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Nov. 17, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E6%89%A9%E5%AE%B9/" title="TiDB 扩容">TiDB 扩容</a></h1>
                
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Nov. 17, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-lightning-%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/" title="TiDB-Lightning 错误排查">TiDB-Lightning 错误排查</a></h1>
                raft entry is too large 修改 TiDB 配置 tiup cluster edit-config tidb tikv: raftstore.raft-entry-max-siz: 128MB 重启 tikv 节点 tiup cluster reload tidb-cluster -R tikv Referencing column &rsquo;table&rsquo; and referenced column &lsquo;id&rsquo; in foreign key constraint &lsquo;fk_1&rsquo; are incompatible 外键约束错误 查找引用 table 的表 SELECT * FROM information_schema.KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_NAME = &#39;table&#39;; 删除引用 table 的表
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Oct. 23, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/" title="TiDB 单机部署">TiDB 单机部署</a></h1>
                机器配置 OS: Ubuntu 23.04 CPU: 20 核 Mem: 32 G 安装 tiup 组件 # 安装 tiup 命令 curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh | sh # 升级 cluster 组件 tiup update --self &amp;&amp; tiup update cluster # 验证 tiup 版本信息 tiup --binary cluster 准备集群拓扑文件 topo.yaml # # Global variables are
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Oct. 23, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/" title="TiDB 错误排查">TiDB 错误排查</a></h1>
                entry too large, the max entry size is 6291456, the size of data is 7254170 查看 performance.txn-entry-size-limit 大小： show config where type=&#39;tidb&#39; and name like &#39;%txn-entry-size-limit&#39;; ++++++++++++++++++++++++++--++++++++++++++++++++++++++++++++++-+++++++++++ | Type | Instance | Name | Value | ++++++++++++++++++++++++++--++++++++++++++++++++++++++++++++++-+++++++++++ | tidb | 192.168.70.46:4000 | performance.txn-entry-size-limit | 6291456 | ++++++++++++++++++++++++++--++++++++++++++++++++++++++++++++++-+++++++++++ 1 row in set (0.01 sec) 修改 performance.txn-entry-size-limit 大小： tiup cluster edit-config &lt;cluster-name&gt; server_configs: tidb: txn-entry-size-limit: 62914560
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 10, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/dm-%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6/" title="DM 数据复制">DM 数据复制</a></h1>
                <p><a href="https://docs.pingcap.com/zh/tidb/stable/dm-overview">TiDB Data Migration</a> (DM) 是一款便捷的数据迁移工具，支持从与 MySQL 协议兼容的数据库（MySQL、MariaDB、Aurora MySQL）到 TiDB 的全量数据迁移和增量数据同步。使用 DM 工具有利于简化数据迁移过程，降低数据迁移运维成本。</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 10, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E5%A4%9A%E7%89%A9%E7%90%86%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/" title="TiDB 多物理机集群部署">TiDB 多物理机集群部署</a></h1>
                前情提要 买了三台服务器，内网 IP 如下： 192.168.70.50 192.168.70.51 192.168.70.52 OS: RedHat 想搭建一个 TIDB 集群，只要有一台机器存活就能正常对外提供服务。 服务器环境准备 关闭系统 SWAP echo &#34;vm.swappiness = 0&#34; | sudo
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 5, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E5%BF%AB%E7%85%A7%E6%81%A2%E5%A4%8D/" title="TiDB 快照恢复">TiDB 快照恢复</a></h1>
                <p>TiDB 使用周期性运行的 GC（Garbage Collection，垃圾回收）来进行清理，默认情况下每 10 分钟一次。每次 GC 时，TiDB 会计算一个称为 safe point 的时间戳（默认为上次运行 GC 的时间减去 10 分钟），接下来 TiDB 会在保证在 safe point 之后的快照都能够读取到正确数据的前提下，删除更早的过期数据。</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 5, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tikv-%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E6%8E%92%E6%9F%A5/" title="TIKV 内存占用过高排查">TIKV 内存占用过高排查</a></h1>
                <p>tidb 集群（tidb-cluster）的 tikv 节点，占用内存高达 30/50 G，内存不够用。</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 4, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E9%9B%86%E7%BE%A4%E8%8A%82%E7%82%B9%E6%8D%9F%E5%9D%8F%E4%BF%AE%E5%A4%8D/" title="TiDB 集群节点损坏修复">TiDB 集群节点损坏修复</a></h1>
                <p>tidb 某个节点的数据目录被删除，导致节点损坏。</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jun. 27, 2023</div>    
                <h1><a href="https://blog.wukaige.com/posts/tidb-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/" title="TiDB 用户管理">TiDB 用户管理</a></h1>
                创建新用户 CREATE USER &#39;user&#39;@&#39;%&#39; IDENTIFIED BY &#39;password&#39;; 设置用户权限 -- 部分权限 GRANT SELECT,INSERT ON database.* TO &#39;user&#39;@&#39;%&#39;; -- 所有权限 GRANT ALL PRIVILEGES ON database.* TO &#39;user&#39;@&#39;%&#39;; 修改用户密码 SET PASSWORD FOR &#39;root&#39;@&#39;%&#39; = &#39;xxx&#39;; 刷新权限 FLUSH PRIVILEGES; 删除用户 DROP USER &#39;user&#39;@&#39;host&#39;;
            </p>
        </div>
    

</div>


        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
  </body>
</html>
